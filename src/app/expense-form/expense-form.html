<div class="backdrop"></div>
<dialog open>
  <h2>Add Expense</h2>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <p>
      <input type="text" id="id" name="id" hidden required [formControl]="form.controls.id"/>
    </p>
    <p>
      <label for="date">Date</label>
      <input type="date" id="date" name="date" [formControl]="form.controls.date"/>
       @if (form.controls.date.invalid && (form.controls.date.dirty || form.controls.date.touched) && form.controls.date.hasError('required')) {
            <div class="control-error">
                Date is required.
            </div>
       }
    </p>
    <p>
      <label for="title">Title</label>
      <input type="text" id="title" name="title" [formControl]="form.controls.title"/>
       @if (form.controls.title.invalid && (form.controls.title.dirty || form.controls.title.touched) && form.controls.title.hasError('required')) {
            <div class="control-error">
                Title is required.
            </div>
       }
    </p>
    <p>
      <label for="amount">Amount</label>
      <input type="number" id="amount" name="amount" min="0" [formControl]="form.controls.amount"/>
       @if (form.controls.amount.invalid && (form.controls.amount.dirty || form.controls.amount.touched)
            && (form.controls.amount.hasError('required') || form.controls.amount.hasError('notGreaterThanZero'))) {
            <div class="control-error">
                Amount is required.
            </div>
       }
    </p>
    <p>
      <label for="note">Note</label>
      <textarea id="note" rows="5" name="note" [formControl]="form.controls.note"></textarea>
    </p>
    <p class="actions">
      <button type="button" (click)="onCancel()">Cancel</button>
      <button type="submit">{{ isEditMode ? 'Update' : 'Create' }}</button>
    </p>
    @if(isFormInvalid){
      <p class="control-error">Please fill all required fields</p>
    }
  </form>
</dialog>